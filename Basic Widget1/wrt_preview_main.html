<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Sample Widget</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link href="basic.css" rel="stylesheet" type="text/css" />

	<script src="platformservices.js" type="text/javascript"></script>

	<script language="javascript">
 
        var so = null;
        var channel = "Orientation";
 
        // Callback method called whenever change in Device Orientation is detected.
        function onOrientationChange( transId, errCode, orientation ){
 
          if( errCode == 0 ){
            alert("Device Orientation : " + orientation.deviceOrientation);
          }
        };
 
        // On exit lets stop sensor.
        window.widget.onexit = function() { 
 
            so.stopChannel(channel);               
        };
 
 
        try{
          // Lets first create geolocation object.
          so = com.nokia.device.load("", "com.nokia.device.sensors");
          // Lets get the Orientation channel.
          var channels = so.getChannels();
          var len = channels.length;
          var sensorExists = false;
          for( var i = 0; i < len; i++){
            if( channels[i] === channel ){
              sensorExists = true;
              break; 
            }          
          }
 
          if( !sensorExists ){
               alert("Device Orientation sensor not available !");
               return;
          }
 
          // Lets start getting Device Orientation Changes.  
          var tid = so.startChannel(onOrientationChange, channel);
 
        }catch(e){
 
          alert("Error : " + e);
        };
 
 
	</script>

	<script type="text/javascript" src="preview/script/lib/loader.js"></script>
	</head>
<body>
	Device Orientation Test Widget
	<br>
	using platform services 2.0</body>
</html>

